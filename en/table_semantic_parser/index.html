
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../module/">
      
      
        <link rel="next" href="../schemas/">
      
      
        
          <link rel="alternate" href="../../table_semantic_parser/" hreflang="ja">
        
          <link rel="alternate" href="./" hreflang="en">
        
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Table Semantic Parser - YomiToku</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/schema_cards_colors.css">
    
      <link rel="stylesheet" href="../../assets/schema_cards.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#using-the-table-semantic-parser" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../" title="YomiToku" class="md-header__button md-logo" aria-label="YomiToku" data-md-component="logo">
      
  <img src="../../assets/logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            YomiToku
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Table Semantic Parser
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="blue"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="Select language">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="../../table_semantic_parser/" hreflang="ja" class="md-select__link">
              日本語
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="./" hreflang="en" class="md-select__link">
              English
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/kotaro-kinoshita/yomitoku-dev" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../" class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../installation/" class="md-tabs__link">
        
  
  
    
  
  Installation

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../cli/" class="md-tabs__link">
          
  
  
  CLI Usage

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../module/" class="md-tabs__link">
        
  
  
    
  
  Module Usage

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    <li class="md-tabs__item md-tabs__item--active">
      <a href="./" class="md-tabs__link">
        
  
  
    
  
  Table Semantic Parser

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../schemas/" class="md-tabs__link">
        
  
  
    
  
  Module Output

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../configuration/" class="md-tabs__link">
        
  
  
    
  
  Model Config

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../release_note/" class="md-tabs__link">
        
  
  
    
  
  Release Note

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../mcp/" class="md-tabs__link">
        
  
  
    
  
  MCP

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../commercial_use_guideline/" class="md-tabs__link">
        
  
  
    
  
  Commercial Use

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../" title="YomiToku" class="md-nav__button md-logo" aria-label="YomiToku" data-md-component="logo">
      
  <img src="../../assets/logo.svg" alt="logo">

    </a>
    YomiToku
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/kotaro-kinoshita/yomitoku-dev" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Installation
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    CLI Usage
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    CLI Usage
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cli/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Document Analyzer
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../extractor/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Extractor
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../schema_generation_prompt/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Schema Generation Prompt
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../module/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Module Usage
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Table Semantic Parser
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Table Semantic Parser
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#sample-data" class="md-nav__link">
    <span class="md-ellipsis">
      
        Sample Data
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sample-code" class="md-nav__link">
    <span class="md-ellipsis">
      
        Sample Code
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#output-of-the-table-semantic-parser" class="md-nav__link">
    <span class="md-ellipsis">
      
        Output of the Table Semantic Parser
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#visualization-of-the-results" class="md-nav__link">
    <span class="md-ellipsis">
      
        Visualization of the Results
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#two-types-of-structured-outputs-kv_items-and-grids" class="md-nav__link">
    <span class="md-ellipsis">
      
        Two Types of Structured Outputs: kv_items and grids
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Two Types of Structured Outputs: kv_items and grids">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kv_items-key-value" class="md-nav__link">
    <span class="md-ellipsis">
      
        kv_items (Key-Value)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#grids-grid-tabular-records" class="md-nav__link">
    <span class="md-ellipsis">
      
        grids (Grid / Tabular Records)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cells" class="md-nav__link">
    <span class="md-ellipsis">
      
        Cells
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#python-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        Python API
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Python API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#resultsfind_table_by_id" class="md-nav__link">
    <span class="md-ellipsis">
      
        results.find_table_by_id
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resultsfind_table_by_position" class="md-nav__link">
    <span class="md-ellipsis">
      
        results.find_table_by_position
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#retrieving-information-by-position-and-cells-id-position-neighborhood" class="md-nav__link">
    <span class="md-ellipsis">
      
        Retrieving Information by Position and Cells (ID / Position / Neighborhood)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Retrieving Information by Position and Cells (ID / Position / Neighborhood)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-search-the-entire-document" class="md-nav__link">
    <span class="md-ellipsis">
      
        A. Search the Entire Document
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="A. Search the Entire Document">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#resultssearch_words_by_position" class="md-nav__link">
    <span class="md-ellipsis">
      
        results.search_words_by_position
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#b-search-within-a-specific-table-table-object" class="md-nav__link">
    <span class="md-ellipsis">
      
        B. Search Within a Specific Table (table object)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="B. Search Within a Specific Table (table object)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tablefind_cell_by_id" class="md-nav__link">
    <span class="md-ellipsis">
      
        table.find_cell_by_id
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tablesearch_cells_by_query" class="md-nav__link">
    <span class="md-ellipsis">
      
        table.search_cells_by_query
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tablesearch_cells_right_of_key_text-tablesearch_cells_below_key_text" class="md-nav__link">
    <span class="md-ellipsis">
      
        table.search_cells_right_of_key_text / table.search_cells_below_key_text
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extracting-information-from-semantic-structures-kv_items-grids" class="md-nav__link">
    <span class="md-ellipsis">
      
        Extracting Information from Semantic Structures (kv_items / grids)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Extracting Information from Semantic Structures (kv_items / grids)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-search-the-entire-document-no-table-specified" class="md-nav__link">
    <span class="md-ellipsis">
      
        A. Search the Entire Document (No Table Specified)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="A. Search the Entire Document (No Table Specified)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#resultssearch_kv_items_by_key" class="md-nav__link">
    <span class="md-ellipsis">
      
        results.search_kv_items_by_key
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#b-search-within-a-specific-table-table-object_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        B. Search Within a Specific Table (table object)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="B. Search Within a Specific Table (table object)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tablesearch_kv_items_by_key" class="md-nav__link">
    <span class="md-ellipsis">
      
        table.search_kv_items_by_key
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tableviewkv_items_to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      
        table.view.kv_items_to_dict
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tableviewgrids_to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      
        table.view.grids_to_dict()
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exporting-structured-data-json-csv" class="md-nav__link">
    <span class="md-ellipsis">
      
        Exporting Structured Data (JSON / CSV)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Exporting Structured Data (JSON / CSV)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-export-the-entire-document" class="md-nav__link">
    <span class="md-ellipsis">
      
        A. Export the Entire Document
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="A. Export the Entire Document">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#resultsto_json" class="md-nav__link">
    <span class="md-ellipsis">
      
        results.to_json
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tablesemanticparserschemaload_json" class="md-nav__link">
    <span class="md-ellipsis">
      
        TableSemanticParserSchema.load_json
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resultsto_dict" class="md-nav__link">
    <span class="md-ellipsis">
      
        results.to_dict
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#b-export-per-table" class="md-nav__link">
    <span class="md-ellipsis">
      
        B. Export Per Table
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="B. Export Per Table">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tablekv_items_to_json" class="md-nav__link">
    <span class="md-ellipsis">
      
        table.kv_items_to_json
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tablegrids_to_json" class="md-nav__link">
    <span class="md-ellipsis">
      
        table.grids_to_json
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tablegrids_to_csv" class="md-nav__link">
    <span class="md-ellipsis">
      
        table.grids_to_csv
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../schemas/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Module Output
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Model Config
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../release_note/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Release Note
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../mcp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    MCP
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../commercial_use_guideline/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Commercial Use
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#sample-data" class="md-nav__link">
    <span class="md-ellipsis">
      
        Sample Data
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sample-code" class="md-nav__link">
    <span class="md-ellipsis">
      
        Sample Code
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#output-of-the-table-semantic-parser" class="md-nav__link">
    <span class="md-ellipsis">
      
        Output of the Table Semantic Parser
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#visualization-of-the-results" class="md-nav__link">
    <span class="md-ellipsis">
      
        Visualization of the Results
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#two-types-of-structured-outputs-kv_items-and-grids" class="md-nav__link">
    <span class="md-ellipsis">
      
        Two Types of Structured Outputs: kv_items and grids
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Two Types of Structured Outputs: kv_items and grids">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kv_items-key-value" class="md-nav__link">
    <span class="md-ellipsis">
      
        kv_items (Key-Value)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#grids-grid-tabular-records" class="md-nav__link">
    <span class="md-ellipsis">
      
        grids (Grid / Tabular Records)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cells" class="md-nav__link">
    <span class="md-ellipsis">
      
        Cells
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#python-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        Python API
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Python API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#resultsfind_table_by_id" class="md-nav__link">
    <span class="md-ellipsis">
      
        results.find_table_by_id
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resultsfind_table_by_position" class="md-nav__link">
    <span class="md-ellipsis">
      
        results.find_table_by_position
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#retrieving-information-by-position-and-cells-id-position-neighborhood" class="md-nav__link">
    <span class="md-ellipsis">
      
        Retrieving Information by Position and Cells (ID / Position / Neighborhood)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Retrieving Information by Position and Cells (ID / Position / Neighborhood)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-search-the-entire-document" class="md-nav__link">
    <span class="md-ellipsis">
      
        A. Search the Entire Document
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="A. Search the Entire Document">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#resultssearch_words_by_position" class="md-nav__link">
    <span class="md-ellipsis">
      
        results.search_words_by_position
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#b-search-within-a-specific-table-table-object" class="md-nav__link">
    <span class="md-ellipsis">
      
        B. Search Within a Specific Table (table object)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="B. Search Within a Specific Table (table object)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tablefind_cell_by_id" class="md-nav__link">
    <span class="md-ellipsis">
      
        table.find_cell_by_id
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tablesearch_cells_by_query" class="md-nav__link">
    <span class="md-ellipsis">
      
        table.search_cells_by_query
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tablesearch_cells_right_of_key_text-tablesearch_cells_below_key_text" class="md-nav__link">
    <span class="md-ellipsis">
      
        table.search_cells_right_of_key_text / table.search_cells_below_key_text
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extracting-information-from-semantic-structures-kv_items-grids" class="md-nav__link">
    <span class="md-ellipsis">
      
        Extracting Information from Semantic Structures (kv_items / grids)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Extracting Information from Semantic Structures (kv_items / grids)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-search-the-entire-document-no-table-specified" class="md-nav__link">
    <span class="md-ellipsis">
      
        A. Search the Entire Document (No Table Specified)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="A. Search the Entire Document (No Table Specified)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#resultssearch_kv_items_by_key" class="md-nav__link">
    <span class="md-ellipsis">
      
        results.search_kv_items_by_key
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#b-search-within-a-specific-table-table-object_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        B. Search Within a Specific Table (table object)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="B. Search Within a Specific Table (table object)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tablesearch_kv_items_by_key" class="md-nav__link">
    <span class="md-ellipsis">
      
        table.search_kv_items_by_key
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tableviewkv_items_to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      
        table.view.kv_items_to_dict
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tableviewgrids_to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      
        table.view.grids_to_dict()
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exporting-structured-data-json-csv" class="md-nav__link">
    <span class="md-ellipsis">
      
        Exporting Structured Data (JSON / CSV)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Exporting Structured Data (JSON / CSV)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-export-the-entire-document" class="md-nav__link">
    <span class="md-ellipsis">
      
        A. Export the Entire Document
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="A. Export the Entire Document">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#resultsto_json" class="md-nav__link">
    <span class="md-ellipsis">
      
        results.to_json
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tablesemanticparserschemaload_json" class="md-nav__link">
    <span class="md-ellipsis">
      
        TableSemanticParserSchema.load_json
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resultsto_dict" class="md-nav__link">
    <span class="md-ellipsis">
      
        results.to_dict
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#b-export-per-table" class="md-nav__link">
    <span class="md-ellipsis">
      
        B. Export Per Table
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="B. Export Per Table">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tablekv_items_to_json" class="md-nav__link">
    <span class="md-ellipsis">
      
        table.kv_items_to_json
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tablegrids_to_json" class="md-nav__link">
    <span class="md-ellipsis">
      
        table.grids_to_json
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tablegrids_to_csv" class="md-nav__link">
    <span class="md-ellipsis">
      
        table.grids_to_csv
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="using-the-table-semantic-parser">Using the Table Semantic Parser<a class="headerlink" href="#using-the-table-semantic-parser" title="Permanent link">&para;</a></h1>
<p><code>TableSemanticParser</code> is a module that detects <strong>tables</strong> from form/document images and <strong>converts them into structured data</strong>. It also automatically estimates and analyzes semantic structures such as <strong>cell roles</strong> (e.g., <code>header</code> / <code>cell</code>) and <strong>Key-Value pairs (label → value)</strong>.</p>
<p><strong>Key features</strong></p>
<ul>
<li>Table region detection</li>
<li>Cell segmentation (estimating cell boundaries)</li>
<li>OCR (reading text inside cells)</li>
<li>Cell role estimation (header / value)</li>
<li>Key-Value estimation (data represented as 1:1 relationships between keys and values)</li>
<li>Grid structure estimation (matrix-like, grid-shaped data)</li>
<li>Search/export per table ID (<code>t0</code>, <code>t1</code>, ...)</li>
</ul>
<p>All of these processes are performed end-to-end in a single pipeline.</p>
<p>In the following sections, we explain the functionality with source code and examples.</p>
<blockquote>
<p>Note: Only forms that <strong>have separator lines (ruled lines)</strong> are supported. Tables without separator lines are not supported.</p>
</blockquote>
<hr />
<h2 id="sample-data">Sample Data<a class="headerlink" href="#sample-data" title="Permanent link">&para;</a></h2>
<p><img alt="Sample Data" src="../../assets/table.jpg" /></p>
<h2 id="sample-code">Sample Code<a class="headerlink" href="#sample-code" title="Permanent link">&para;</a></h2>
<div class="tabbed-set tabbed-alternate" data-tabs="1:1"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">demo/simple_table_semantic_analysis.py</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-python highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">cv2</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">pprint</span><span class="w"> </span><span class="kn">import</span> <span class="n">pprint</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="kn">from</span><span class="w"> </span><span class="nn">yomitoku.table_semantic_parser</span><span class="w"> </span><span class="kn">import</span> <span class="n">TableSemanticParser</span>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="kn">from</span><span class="w"> </span><span class="nn">yomitoku.data.functions</span><span class="w"> </span><span class="kn">import</span> <span class="n">load_image</span>
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>
</span><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="n">path_img</span> <span class="o">=</span> <span class="s2">&quot;demo/samples/table.jpg&quot;</span>
</span><span id="__span-0-14"><a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>
</span><span id="__span-0-15"><a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a>
</span><span id="__span-0-16"><a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a>
</span><span id="__span-0-17"><a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a><span class="n">analyzer</span> <span class="o">=</span> <span class="n">TableSemanticParser</span><span class="p">(</span>
</span><span id="__span-0-18"><a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a>
</span><span id="__span-0-19"><a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a>    <span class="n">device</span><span class="o">=</span><span class="s2">&quot;cuda&quot;</span><span class="p">,</span>
</span><span id="__span-0-20"><a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a>
</span><span id="__span-0-21"><a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a>    <span class="n">visualize</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="__span-0-22"><a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a>
</span><span id="__span-0-23"><a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a><span class="p">)</span>
</span><span id="__span-0-24"><a id="__codelineno-0-24" name="__codelineno-0-24" href="#__codelineno-0-24"></a>
</span><span id="__span-0-25"><a id="__codelineno-0-25" name="__codelineno-0-25" href="#__codelineno-0-25"></a>
</span><span id="__span-0-26"><a id="__codelineno-0-26" name="__codelineno-0-26" href="#__codelineno-0-26"></a>
</span><span id="__span-0-27"><a id="__codelineno-0-27" name="__codelineno-0-27" href="#__codelineno-0-27"></a><span class="n">imgs</span> <span class="o">=</span> <span class="n">load_image</span><span class="p">(</span><span class="n">path_img</span><span class="p">)</span>
</span><span id="__span-0-28"><a id="__codelineno-0-28" name="__codelineno-0-28" href="#__codelineno-0-28"></a>
</span><span id="__span-0-29"><a id="__codelineno-0-29" name="__codelineno-0-29" href="#__codelineno-0-29"></a>
</span><span id="__span-0-30"><a id="__codelineno-0-30" name="__codelineno-0-30" href="#__codelineno-0-30"></a>
</span><span id="__span-0-31"><a id="__codelineno-0-31" name="__codelineno-0-31" href="#__codelineno-0-31"></a><span class="n">results</span><span class="p">,</span> <span class="n">vis_layout</span><span class="p">,</span> <span class="n">vis_ocr</span> <span class="o">=</span> <span class="n">analyzer</span><span class="p">(</span>
</span><span id="__span-0-32"><a id="__codelineno-0-32" name="__codelineno-0-32" href="#__codelineno-0-32"></a>
</span><span id="__span-0-33"><a id="__codelineno-0-33" name="__codelineno-0-33" href="#__codelineno-0-33"></a>    <span class="n">imgs</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
</span><span id="__span-0-34"><a id="__codelineno-0-34" name="__codelineno-0-34" href="#__codelineno-0-34"></a>
</span><span id="__span-0-35"><a id="__codelineno-0-35" name="__codelineno-0-35" href="#__codelineno-0-35"></a><span class="p">)</span>
</span><span id="__span-0-36"><a id="__codelineno-0-36" name="__codelineno-0-36" href="#__codelineno-0-36"></a>
</span><span id="__span-0-37"><a id="__codelineno-0-37" name="__codelineno-0-37" href="#__codelineno-0-37"></a>
</span><span id="__span-0-38"><a id="__codelineno-0-38" name="__codelineno-0-38" href="#__codelineno-0-38"></a>
</span><span id="__span-0-39"><a id="__codelineno-0-39" name="__codelineno-0-39" href="#__codelineno-0-39"></a><span class="c1"># 解析結果をJSONで保存</span>
</span><span id="__span-0-40"><a id="__codelineno-0-40" name="__codelineno-0-40" href="#__codelineno-0-40"></a>
</span><span id="__span-0-41"><a id="__codelineno-0-41" name="__codelineno-0-41" href="#__codelineno-0-41"></a><span class="n">results</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="s2">&quot;result.json&quot;</span><span class="p">)</span>
</span><span id="__span-0-42"><a id="__codelineno-0-42" name="__codelineno-0-42" href="#__codelineno-0-42"></a>
</span><span id="__span-0-43"><a id="__codelineno-0-43" name="__codelineno-0-43" href="#__codelineno-0-43"></a>
</span><span id="__span-0-44"><a id="__codelineno-0-44" name="__codelineno-0-44" href="#__codelineno-0-44"></a>
</span><span id="__span-0-45"><a id="__codelineno-0-45" name="__codelineno-0-45" href="#__codelineno-0-45"></a><span class="c1"># OCRの読み取り結果を可視化</span>
</span><span id="__span-0-46"><a id="__codelineno-0-46" name="__codelineno-0-46" href="#__codelineno-0-46"></a>
</span><span id="__span-0-47"><a id="__codelineno-0-47" name="__codelineno-0-47" href="#__codelineno-0-47"></a><span class="n">cv2</span><span class="o">.</span><span class="n">imwrite</span><span class="p">(</span><span class="s2">&quot;vis_ocr.jpg&quot;</span><span class="p">,</span> <span class="n">vis_ocr</span><span class="p">)</span>
</span><span id="__span-0-48"><a id="__codelineno-0-48" name="__codelineno-0-48" href="#__codelineno-0-48"></a>
</span><span id="__span-0-49"><a id="__codelineno-0-49" name="__codelineno-0-49" href="#__codelineno-0-49"></a>
</span><span id="__span-0-50"><a id="__codelineno-0-50" name="__codelineno-0-50" href="#__codelineno-0-50"></a>
</span><span id="__span-0-51"><a id="__codelineno-0-51" name="__codelineno-0-51" href="#__codelineno-0-51"></a><span class="c1"># セル検出結果を可視化</span>
</span><span id="__span-0-52"><a id="__codelineno-0-52" name="__codelineno-0-52" href="#__codelineno-0-52"></a>
</span><span id="__span-0-53"><a id="__codelineno-0-53" name="__codelineno-0-53" href="#__codelineno-0-53"></a><span class="n">cv2</span><span class="o">.</span><span class="n">imwrite</span><span class="p">(</span><span class="s2">&quot;vis_cell.jpg&quot;</span><span class="p">,</span> <span class="n">vis_layout</span><span class="p">)</span>
</span><span id="__span-0-54"><a id="__codelineno-0-54" name="__codelineno-0-54" href="#__codelineno-0-54"></a>
</span><span id="__span-0-55"><a id="__codelineno-0-55" name="__codelineno-0-55" href="#__codelineno-0-55"></a>
</span><span id="__span-0-56"><a id="__codelineno-0-56" name="__codelineno-0-56" href="#__codelineno-0-56"></a>
</span><span id="__span-0-57"><a id="__codelineno-0-57" name="__codelineno-0-57" href="#__codelineno-0-57"></a>
</span><span id="__span-0-58"><a id="__codelineno-0-58" name="__codelineno-0-58" href="#__codelineno-0-58"></a>
</span><span id="__span-0-59"><a id="__codelineno-0-59" name="__codelineno-0-59" href="#__codelineno-0-59"></a><span class="c1"># 利用情報を表示</span>
</span><span id="__span-0-60"><a id="__codelineno-0-60" name="__codelineno-0-60" href="#__codelineno-0-60"></a>
</span><span id="__span-0-61"><a id="__codelineno-0-61" name="__codelineno-0-61" href="#__codelineno-0-61"></a><span class="c1"># t0というIDのテーブルを取得</span>
</span><span id="__span-0-62"><a id="__codelineno-0-62" name="__codelineno-0-62" href="#__codelineno-0-62"></a>
</span><span id="__span-0-63"><a id="__codelineno-0-63" name="__codelineno-0-63" href="#__codelineno-0-63"></a><span class="n">table</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">find_table_by_id</span><span class="p">(</span><span class="n">table_id</span><span class="o">=</span><span class="s2">&quot;t0&quot;</span><span class="p">)</span>
</span><span id="__span-0-64"><a id="__codelineno-0-64" name="__codelineno-0-64" href="#__codelineno-0-64"></a>
</span><span id="__span-0-65"><a id="__codelineno-0-65" name="__codelineno-0-65" href="#__codelineno-0-65"></a>
</span><span id="__span-0-66"><a id="__codelineno-0-66" name="__codelineno-0-66" href="#__codelineno-0-66"></a>
</span><span id="__span-0-67"><a id="__codelineno-0-67" name="__codelineno-0-67" href="#__codelineno-0-67"></a><span class="c1"># テーブルのすべてのスキーマを表示</span>
</span><span id="__span-0-68"><a id="__codelineno-0-68" name="__codelineno-0-68" href="#__codelineno-0-68"></a>
</span><span id="__span-0-69"><a id="__codelineno-0-69" name="__codelineno-0-69" href="#__codelineno-0-69"></a><span class="n">pprint</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">kv_items_to_dict</span><span class="p">())</span>
</span><span id="__span-0-70"><a id="__codelineno-0-70" name="__codelineno-0-70" href="#__codelineno-0-70"></a>
</span><span id="__span-0-71"><a id="__codelineno-0-71" name="__codelineno-0-71" href="#__codelineno-0-71"></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-0-72"><a id="__codelineno-0-72" name="__codelineno-0-72" href="#__codelineno-0-72"></a>
</span><span id="__span-0-73"><a id="__codelineno-0-73" name="__codelineno-0-73" href="#__codelineno-0-73"></a><span class="sd">&gt;&gt;{&#39;利用目的&#39;: &#39;セミナー&#39;, &#39;実施内容&#39;: &#39;YomiTokuの利用方法に関する説明会&#39;, &#39;施設名称&#39;: &#39;MLism株式会社&#39;}</span>
</span><span id="__span-0-74"><a id="__codelineno-0-74" name="__codelineno-0-74" href="#__codelineno-0-74"></a>
</span><span id="__span-0-75"><a id="__codelineno-0-75" name="__codelineno-0-75" href="#__codelineno-0-75"></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-0-76"><a id="__codelineno-0-76" name="__codelineno-0-76" href="#__codelineno-0-76"></a>
</span><span id="__span-0-77"><a id="__codelineno-0-77" name="__codelineno-0-77" href="#__codelineno-0-77"></a>
</span><span id="__span-0-78"><a id="__codelineno-0-78" name="__codelineno-0-78" href="#__codelineno-0-78"></a>
</span><span id="__span-0-79"><a id="__codelineno-0-79" name="__codelineno-0-79" href="#__codelineno-0-79"></a><span class="n">pprint</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">grids_to_dict</span><span class="p">())</span>
</span><span id="__span-0-80"><a id="__codelineno-0-80" name="__codelineno-0-80" href="#__codelineno-0-80"></a>
</span><span id="__span-0-81"><a id="__codelineno-0-81" name="__codelineno-0-81" href="#__codelineno-0-81"></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-0-82"><a id="__codelineno-0-82" name="__codelineno-0-82" href="#__codelineno-0-82"></a>
</span><span id="__span-0-83"><a id="__codelineno-0-83" name="__codelineno-0-83" href="#__codelineno-0-83"></a><span class="sd">&gt;&gt;[{&#39;id&#39;: &#39;g0&#39;,</span>
</span><span id="__span-0-84"><a id="__codelineno-0-84" name="__codelineno-0-84" href="#__codelineno-0-84"></a>
</span><span id="__span-0-85"><a id="__codelineno-0-85" name="__codelineno-0-85" href="#__codelineno-0-85"></a><span class="sd">&gt;&gt;  &#39;rows&#39;: [{&#39;入室時刻&#39;: &#39;10時00分&#39;, &#39;日付&#39;: &#39;2025年01月30日(月曜日)&#39;, &#39;退室時刻&#39;: &#39;17時00分&#39;},</span>
</span><span id="__span-0-86"><a id="__codelineno-0-86" name="__codelineno-0-86" href="#__codelineno-0-86"></a>
</span><span id="__span-0-87"><a id="__codelineno-0-87" name="__codelineno-0-87" href="#__codelineno-0-87"></a><span class="sd">&gt;&gt;           {&#39;入室時刻&#39;: &#39;10時00分&#39;, &#39;日付&#39;: &#39;2025年02月1日(火曜日)&#39;, &#39;退室時刻&#39;: &#39;17時00分&#39;},</span>
</span><span id="__span-0-88"><a id="__codelineno-0-88" name="__codelineno-0-88" href="#__codelineno-0-88"></a>
</span><span id="__span-0-89"><a id="__codelineno-0-89" name="__codelineno-0-89" href="#__codelineno-0-89"></a><span class="sd">&gt;&gt;           {&#39;入室時刻&#39;: &#39;時分&#39;, &#39;日付&#39;: &#39;年月日(曜日)&#39;, &#39;退室時刻&#39;: &#39;時分&#39;},</span>
</span><span id="__span-0-90"><a id="__codelineno-0-90" name="__codelineno-0-90" href="#__codelineno-0-90"></a>
</span><span id="__span-0-91"><a id="__codelineno-0-91" name="__codelineno-0-91" href="#__codelineno-0-91"></a><span class="sd">&gt;&gt;           {&#39;入室時刻&#39;: &#39;時分&#39;, &#39;日付&#39;: &#39;年月日(曜日)&#39;, &#39;退室時刻&#39;: &#39;時分&#39;},</span>
</span><span id="__span-0-92"><a id="__codelineno-0-92" name="__codelineno-0-92" href="#__codelineno-0-92"></a>
</span><span id="__span-0-93"><a id="__codelineno-0-93" name="__codelineno-0-93" href="#__codelineno-0-93"></a><span class="sd">&gt;&gt;           {&#39;入室時刻&#39;: &#39;時分&#39;, &#39;日付&#39;: &#39;年月日(曜日)&#39;, &#39;退室時刻&#39;: &#39;時分&#39;}]</span>
</span><span id="__span-0-94"><a id="__codelineno-0-94" name="__codelineno-0-94" href="#__codelineno-0-94"></a>
</span><span id="__span-0-95"><a id="__codelineno-0-95" name="__codelineno-0-95" href="#__codelineno-0-95"></a><span class="sd">&gt;&gt;}]</span>
</span><span id="__span-0-96"><a id="__codelineno-0-96" name="__codelineno-0-96" href="#__codelineno-0-96"></a>
</span><span id="__span-0-97"><a id="__codelineno-0-97" name="__codelineno-0-97" href="#__codelineno-0-97"></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-0-98"><a id="__codelineno-0-98" name="__codelineno-0-98" href="#__codelineno-0-98"></a>
</span><span id="__span-0-99"><a id="__codelineno-0-99" name="__codelineno-0-99" href="#__codelineno-0-99"></a>
</span><span id="__span-0-100"><a id="__codelineno-0-100" name="__codelineno-0-100" href="#__codelineno-0-100"></a>
</span><span id="__span-0-101"><a id="__codelineno-0-101" name="__codelineno-0-101" href="#__codelineno-0-101"></a>
</span><span id="__span-0-102"><a id="__codelineno-0-102" name="__codelineno-0-102" href="#__codelineno-0-102"></a>
</span><span id="__span-0-103"><a id="__codelineno-0-103" name="__codelineno-0-103" href="#__codelineno-0-103"></a><span class="c1"># 解析結果から団体名を検索して表示</span>
</span><span id="__span-0-104"><a id="__codelineno-0-104" name="__codelineno-0-104" href="#__codelineno-0-104"></a>
</span><span id="__span-0-105"><a id="__codelineno-0-105" name="__codelineno-0-105" href="#__codelineno-0-105"></a><span class="n">table</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">find_table_by_id</span><span class="p">(</span><span class="n">table_id</span><span class="o">=</span><span class="s2">&quot;t1&quot;</span><span class="p">)</span>
</span><span id="__span-0-106"><a id="__codelineno-0-106" name="__codelineno-0-106" href="#__codelineno-0-106"></a>
</span><span id="__span-0-107"><a id="__codelineno-0-107" name="__codelineno-0-107" href="#__codelineno-0-107"></a><span class="n">pprint</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">search_kv_items_by_key</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="s2">&quot;団体名&quot;</span><span class="p">))</span>
</span><span id="__span-0-108"><a id="__codelineno-0-108" name="__codelineno-0-108" href="#__codelineno-0-108"></a>
</span><span id="__span-0-109"><a id="__codelineno-0-109" name="__codelineno-0-109" href="#__codelineno-0-109"></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-0-110"><a id="__codelineno-0-110" name="__codelineno-0-110" href="#__codelineno-0-110"></a>
</span><span id="__span-0-111"><a id="__codelineno-0-111" name="__codelineno-0-111" href="#__codelineno-0-111"></a><span class="sd">&gt;&gt; [{&#39;key&#39;: [CellSchema(meta={}, contents=&#39;団 体 名&#39;, role=&#39;header&#39;, id=&#39;c1&#39;, box=[149, 1393, 364, 1539], row=None, col=None, row_span=None, col_span=None)],</span>
</span><span id="__span-0-112"><a id="__codelineno-0-112" name="__codelineno-0-112" href="#__codelineno-0-112"></a>
</span><span id="__span-0-113"><a id="__codelineno-0-113" name="__codelineno-0-113" href="#__codelineno-0-113"></a><span class="sd">&gt;&gt;  &#39;value&#39;: CellSchema(meta={}, contents=&#39;エムリズムカブシキガイシャ&#39;, role=&#39;cell&#39;, id=&#39;c2&#39;, box=[365, 1393, 1498, 1444], row=None, col=None, row_span=None, col_span=None)},</span>
</span><span id="__span-0-114"><a id="__codelineno-0-114" name="__codelineno-0-114" href="#__codelineno-0-114"></a>
</span><span id="__span-0-115"><a id="__codelineno-0-115" name="__codelineno-0-115" href="#__codelineno-0-115"></a><span class="sd">&gt;&gt; {&#39;key&#39;: [CellSchema(meta={}, contents=&#39;団 体 名&#39;, role=&#39;header&#39;, id=&#39;c1&#39;, box=[149, 1393, 364, 1539], row=None, col=None, row_span=None, col_span=None)],</span>
</span><span id="__span-0-116"><a id="__codelineno-0-116" name="__codelineno-0-116" href="#__codelineno-0-116"></a>
</span><span id="__span-0-117"><a id="__codelineno-0-117" name="__codelineno-0-117" href="#__codelineno-0-117"></a><span class="sd">&gt;&gt;  &#39;value&#39;: CellSchema(meta={}, contents=&#39;MLism 株式会社&#39;, role=&#39;cell&#39;, id=&#39;c3&#39;, box=[365, 1444, 1498, 1539], row=None, col=None, row_span=None, col_span=None)}]</span>
</span><span id="__span-0-118"><a id="__codelineno-0-118" name="__codelineno-0-118" href="#__codelineno-0-118"></a>
</span><span id="__span-0-119"><a id="__codelineno-0-119" name="__codelineno-0-119" href="#__codelineno-0-119"></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-0-120"><a id="__codelineno-0-120" name="__codelineno-0-120" href="#__codelineno-0-120"></a>
</span><span id="__span-0-121"><a id="__codelineno-0-121" name="__codelineno-0-121" href="#__codelineno-0-121"></a>
</span><span id="__span-0-122"><a id="__codelineno-0-122" name="__codelineno-0-122" href="#__codelineno-0-122"></a>
</span><span id="__span-0-123"><a id="__codelineno-0-123" name="__codelineno-0-123" href="#__codelineno-0-123"></a>
</span><span id="__span-0-124"><a id="__codelineno-0-124" name="__codelineno-0-124" href="#__codelineno-0-124"></a>
</span><span id="__span-0-125"><a id="__codelineno-0-125" name="__codelineno-0-125" href="#__codelineno-0-125"></a><span class="c1"># 解析結果から住所を検索して表示</span>
</span><span id="__span-0-126"><a id="__codelineno-0-126" name="__codelineno-0-126" href="#__codelineno-0-126"></a>
</span><span id="__span-0-127"><a id="__codelineno-0-127" name="__codelineno-0-127" href="#__codelineno-0-127"></a><span class="n">pprint</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">search_kv_items_by_key</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="s2">&quot;住所&quot;</span><span class="p">))</span>
</span><span id="__span-0-128"><a id="__codelineno-0-128" name="__codelineno-0-128" href="#__codelineno-0-128"></a>
</span><span id="__span-0-129"><a id="__codelineno-0-129" name="__codelineno-0-129" href="#__codelineno-0-129"></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-0-130"><a id="__codelineno-0-130" name="__codelineno-0-130" href="#__codelineno-0-130"></a>
</span><span id="__span-0-131"><a id="__codelineno-0-131" name="__codelineno-0-131" href="#__codelineno-0-131"></a><span class="sd">[{&#39;key&#39;: [CellSchema(meta={}, contents=&#39;住 所&#39;, role=&#39;header&#39;, id=&#39;c7&#39;, box=[149, 1686, 364, 1788], row=None, col=None, row_span=None, col_span=None)],</span>
</span><span id="__span-0-132"><a id="__codelineno-0-132" name="__codelineno-0-132" href="#__codelineno-0-132"></a>
</span><span id="__span-0-133"><a id="__codelineno-0-133" name="__codelineno-0-133" href="#__codelineno-0-133"></a><span class="sd">  &#39;value&#39;: CellSchema(meta={}, contents=&#39;〒277-8520千葉県柏市若柴 178 番地 4 柏の葉キャンパス 148 街区 2 ショップ&amp;オフィス棟 6F&#39;, role=&#39;cell&#39;, id=&#39;c8&#39;, box=[365, 1686, 1498, 1788], row=None, col=None, row_span=None, col_span=None)}]</span>
</span><span id="__span-0-134"><a id="__codelineno-0-134" name="__codelineno-0-134" href="#__codelineno-0-134"></a>
</span><span id="__span-0-135"><a id="__codelineno-0-135" name="__codelineno-0-135" href="#__codelineno-0-135"></a><span class="sd">&quot;&quot;&quot;</span>
</span></code></pre></div>
</div>
</div>
</div>
<hr />
<h2 id="output-of-the-table-semantic-parser">Output of the Table Semantic Parser<a class="headerlink" href="#output-of-the-table-semantic-parser" title="Permanent link">&para;</a></h2>
<p>See the <a href="../schemas/">schema</a> for details.</p>
<ul>
<li><code>paragraphs</code>: Information about textual components such as paragraphs and titles in the document. It includes text strings and layout-related text information.</li>
<li>
<p><code>tables</code>: A table region within the document. It contains information such as <code>cells</code>, <code>kv_items</code>, and <code>grids</code>.</p>
</li>
<li>
<p><code>cells</code>: Holds each cell in the table, including the text content inside the cell and the cell role (e.g., <code>header</code> or <code>cell</code>).</p>
</li>
<li><code>kv_items</code>, <code>grids</code>: Semantically structured information derived from the table. Details are explained later.</li>
<li><code>words</code>: Information about text in the document. This is obtained from the text detection model and includes positions and the recognized text within the regions.</li>
</ul>
<h2 id="visualization-of-the-results">Visualization of the Results<a class="headerlink" href="#visualization-of-the-results" title="Permanent link">&para;</a></h2>
<p><img alt="Example of Visualization" src="../../assets/vis_cell.jpg" /></p>
<hr />
<h2 id="two-types-of-structured-outputs-kv_items-and-grids">Two Types of Structured Outputs: <code>kv_items</code> and <code>grids</code><a class="headerlink" href="#two-types-of-structured-outputs-kv_items-and-grids" title="Permanent link">&para;</a></h2>
<p>The Table Semantic Parser not only reconstructs a table as a “set of cells,” but also estimates and outputs the <strong>semantic structure</strong> of the table. The key concepts are <strong><code>kv_items</code></strong> and <strong><code>grids</code></strong>.</p>
<h3 id="kv_items-key-value"><code>kv_items</code> (Key-Value)<a class="headerlink" href="#kv_items-key-value" title="Permanent link">&para;</a></h3>
<p><code>kv_items</code> represent information in a table where a <strong>header (label)</strong> and a <strong>value</strong> correspond <strong>1:1</strong>.</p>
<p>For example, in the sample form, the following items correspond to <code>kv_items</code> (highlighted with red boxes in the visualization):</p>
<ul>
<li><code>利用目的</code> → <code>セミナー</code></li>
<li><code>施設名称</code> → <code>MLism株式会社</code></li>
<li><code>実施内容</code> → <code>YomiTokuの利用方法に関する説明会</code></li>
</ul>
<p>In other words, <code>kv_items</code> are defined as data where a label and a value are semantically paired and it is natural to treat them as a dictionary (Key-Value).</p>
<h3 id="grids-grid-tabular-records"><code>grids</code> (Grid / Tabular Records)<a class="headerlink" href="#grids-grid-tabular-records" title="Permanent link">&para;</a></h3>
<p><code>grids</code> represent data that can be interpreted as a <strong>row/column grid structure</strong>, i.e., data that can be interpreted as a <strong>matrix</strong> (highlighted with blue boxes in the visualization).</p>
<p>For example, the “利用希望日” section in the sample form can be expressed as repeating rows with columns such as <code>日付</code>, <code>入室時刻</code>, and <code>退室時刻</code>, and thus corresponds to a <code>grid</code>:</p>
<ul>
<li><code>2025年01月30日(月曜日)</code> / <code>10時00分</code> / <code>17時00分</code></li>
<li><code>2025年02月1日(火曜日)</code> / <code>10時00分</code> / <code>17時00分</code></li>
<li>...</li>
</ul>
<p>In other words, <code>grids</code> are defined as grid-shaped data where <strong>multiple rows exist as records</strong> and <strong>columns are defined as attributes</strong>.</p>
<h3 id="cells">Cells<a class="headerlink" href="#cells" title="Permanent link">&para;</a></h3>
<p>Cells inside each table are stored in a schema called <code>cells</code>. Each cell is assigned a table-unique identifier <code>id</code> (e.g., <code>c0</code>).</p>
<p><code>kv_items</code> and <code>grids</code> store cell IDs, and by referencing these IDs you can access detailed cell information. In addition to using structured data such as <code>kv_items</code> and <code>grids</code>, APIs are also provided to reference cells by <code>id</code> or to retrieve specific cell information based on positional relationships.</p>
<hr />
<h2 id="python-api">Python API<a class="headerlink" href="#python-api" title="Permanent link">&para;</a></h2>
<p>The analysis results produced by the Table Semantic Parser can be accessed via APIs to retrieve information by searching IDs, strings, or keys, and to convert/export the data into structured formats.</p>
<p>Some APIs apply to the entire document, while others apply to a specific table. For clarity, functions applied to the whole document are prefixed with <code>results.</code>, and functions applied at the table level are prefixed with <code>table.</code> in this documentation.</p>
<p>To apply processing to a specific table, first obtain the table object using one of the following two functions.</p>
<p>There are two ways to specify a table: by ID or by position. After obtaining the table, you can reference cells or use semantic structures to extract specific information.</p>
<hr />
<h3 id="resultsfind_table_by_id"><code>results.find_table_by_id</code><a class="headerlink" href="#resultsfind_table_by_id" title="Permanent link">&para;</a></h3>
<p>Retrieve a specific table by ID. The <code>table_id</code> can be identified from the JSON output or the visualization. Since sorting and ID assignment follow a deterministic order based on positions, the same format is likely to yield the same ID. However, IDs may change due to false positives or missed detections.</p>
<p><strong>Arguments</strong></p>
<ul>
<li><code>table_id: str</code>: The table ID to retrieve</li>
</ul>
<p><strong>Returns</strong></p>
<ul>
<li><code>TableSemanticContentsSchema</code>: Holds structured information for the specified table.</li>
</ul>
<p><strong>Example</strong></p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="n">table</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">find_table_by_id</span><span class="p">(</span><span class="s2">&quot;t0&quot;</span><span class="p">)</span>
</span></code></pre></div>
<hr />
<h3 id="resultsfind_table_by_position"><code>results.find_table_by_position</code><a class="headerlink" href="#resultsfind_table_by_position" title="Permanent link">&para;</a></h3>
<p>Retrieve table information that overlaps with the specified region. This is useful when ID-based selection is unstable due to false positives or missed detections.</p>
<p><strong>Arguments</strong></p>
<ul>
<li><code>box: List[int]</code>: <code>[x1, y1, x2, y2]</code>
  The rectangle is defined by two points: the top-left <code>(x1, y1)</code> and the bottom-right <code>(x2, y2)</code>.
  <code>x1, y1</code> are the coordinates of the top-left corner, and <code>x2, y2</code> are the coordinates of the bottom-right corner.</li>
</ul>
<p><strong>Returns</strong></p>
<ul>
<li><code>TableSemanticContentsSchema</code>: Holds structured information for the specified table.</li>
</ul>
<p><strong>Example</strong></p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="n">table</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">find_table_by_position</span><span class="p">([</span><span class="mi">149</span><span class="p">,</span> <span class="mi">498</span><span class="p">,</span> <span class="mi">1503</span><span class="p">,</span> <span class="mi">1293</span><span class="p">])</span>
</span></code></pre></div>
<hr />
<h2 id="retrieving-information-by-position-and-cells-id-position-neighborhood">Retrieving Information by Position and Cells (ID / Position / Neighborhood)<a class="headerlink" href="#retrieving-information-by-position-and-cells-id-position-neighborhood" title="Permanent link">&para;</a></h2>
<h3 id="a-search-the-entire-document">A. Search the Entire Document<a class="headerlink" href="#a-search-the-entire-document" title="Permanent link">&para;</a></h3>
<h4 id="resultssearch_words_by_position"><code>results.search_words_by_position</code><a class="headerlink" href="#resultssearch_words_by_position" title="Permanent link">&para;</a></h4>
<p>Retrieve <code>words</code> contained within the specified region to check OCR text. This is useful when you already know that the target text is located in a specific area.</p>
<p><strong>Arguments</strong></p>
<ul>
<li><code>box: List[int]</code>: <code>[x1, y1, x2, y2]</code>
  The rectangle is defined by the top-left <code>(x1, y1)</code> and bottom-right <code>(x2, y2)</code> points.</li>
</ul>
<p><strong>Returns</strong></p>
<ul>
<li><code>str</code>: The text string contained in the region</li>
</ul>
<p><strong>Example</strong></p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="n">word</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">search_words_by_position</span><span class="p">([</span><span class="mi">365</span><span class="p">,</span> <span class="mi">1444</span><span class="p">,</span> <span class="mi">1498</span><span class="p">,</span> <span class="mi">1539</span><span class="p">])</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="nb">print</span><span class="p">(</span><span class="n">word</span><span class="p">)</span>
</span></code></pre></div>
<p><strong>Output</strong></p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>MLism 株式会社
</span></code></pre></div>
<hr />
<h3 id="b-search-within-a-specific-table-table-object">B. Search Within a Specific Table (<code>table</code> object)<a class="headerlink" href="#b-search-within-a-specific-table-table-object" title="Permanent link">&para;</a></h3>
<h4 id="tablefind_cell_by_id"><code>table.find_cell_by_id</code><a class="headerlink" href="#tablefind_cell_by_id" title="Permanent link">&para;</a></h4>
<p>Retrieve a cell in the table by <code>cell_id</code>. Since sorting and ID assignment follow a deterministic order based on positions, the same format is likely to yield the same ID. However, IDs may change due to false positives or missed detections.</p>
<p>If IDs change, you may not be able to extract information correctly. In such cases, try extraction methods based on relative positions or semantic structures.</p>
<p><strong>Arguments</strong></p>
<ul>
<li><code>cell_id: str</code>: Cell ID (e.g., <code>"c0"</code>)</li>
</ul>
<p><strong>Returns</strong></p>
<ul>
<li><code>CellSchema</code>: Contains detailed cell information such as ID, text, bounding box, and row/column indices.</li>
</ul>
<p><strong>Example</strong></p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="n">cell</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">find_cell_by_id</span><span class="p">(</span><span class="s2">&quot;c0&quot;</span><span class="p">)</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="nb">print</span><span class="p">(</span><span class="n">cell</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">cell</span><span class="o">.</span><span class="n">contents</span><span class="p">,</span> <span class="n">cell</span><span class="o">.</span><span class="n">box</span><span class="p">)</span>
</span></code></pre></div>
<p><strong>Output</strong></p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>c0 利用情報 [149, 498, 1501, 550]
</span></code></pre></div>
<hr />
<h4 id="tablesearch_cells_by_query"><code>table.search_cells_by_query</code><a class="headerlink" href="#tablesearch_cells_by_query" title="Permanent link">&para;</a></h4>
<p>List cells whose text content partially matches the given query.</p>
<p><strong>Arguments</strong></p>
<ul>
<li><code>query: str</code>: Text to search for</li>
</ul>
<p><strong>Returns</strong></p>
<ul>
<li><code>List[CellSchema]</code>: A list of matching cells</li>
</ul>
<p><strong>Example</strong></p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="n">cells</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">search_cells_by_query</span><span class="p">(</span><span class="s2">&quot;2025&quot;</span><span class="p">)</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">cells</span><span class="p">:</span>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">c</span><span class="o">.</span><span class="n">contents</span><span class="p">,</span> <span class="n">c</span><span class="o">.</span><span class="n">box</span><span class="p">)</span>
</span></code></pre></div>
<p><strong>Output</strong></p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>c11 2025年 01月 30日(月 曜日) [365, 888, 946, 968]
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>c14 2025年 02月 1日(火 曜日) [365, 968, 946, 1049]
</span></code></pre></div>
<p><strong>Use cases</strong></p>
<ul>
<li>Extract cells that contain a specific string</li>
<li>Retrieve the position of cells containing a specific string</li>
</ul>
<hr />
<h4 id="tablesearch_cells_right_of_key_text-tablesearch_cells_below_key_text"><code>table.search_cells_right_of_key_text</code> / <code>table.search_cells_below_key_text</code><a class="headerlink" href="#tablesearch_cells_right_of_key_text-tablesearch_cells_below_key_text" title="Permanent link">&para;</a></h4>
<p>Retrieve neighboring cells to the right (or below) the cell containing the given key string.</p>
<p>Many Japanese forms have a specific key and store the information to retrieve at a relative position from that key. This API uses that property to get neighboring cell information to the right or below. Key matching is done by partial match.</p>
<p><strong>Arguments</strong></p>
<ul>
<li><code>key: str</code> (partial match)</li>
</ul>
<p><strong>Returns</strong></p>
<ul>
<li><code>List[CellSchema]</code>: A list of matching neighboring cells</li>
</ul>
<p><strong>Example</strong></p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="c1"># Retrieve the neighboring cell(s) to the right of the cell containing &quot;実施内容&quot;</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="n">vals</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">search_cells_right_of_key_text</span><span class="p">(</span><span class="s2">&quot;実施内容&quot;</span><span class="p">)</span>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">vals</span><span class="p">:</span>
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">v</span><span class="o">.</span><span class="n">contents</span><span class="p">)</span>
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a>
</span><span id="__span-9-6"><a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a><span class="c1"># Retrieve the cell(s) directly below the cell containing &quot;実施内容&quot;</span>
</span><span id="__span-9-7"><a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a><span class="n">vals</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">search_cells_below_key_text</span><span class="p">(</span><span class="s2">&quot;実施内容&quot;</span><span class="p">)</span>
</span><span id="__span-9-8"><a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a><span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">vals</span><span class="p">:</span>
</span><span id="__span-9-9"><a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">v</span><span class="o">.</span><span class="n">contents</span><span class="p">)</span>
</span></code></pre></div>
<p><strong>Output</strong></p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>c6 YomiToku の利用方法に関する説明会
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>c7 利用希望日
</span></code></pre></div>
<hr />
<h2 id="extracting-information-from-semantic-structures-kv_items-grids">Extracting Information from Semantic Structures (<code>kv_items</code> / <code>grids</code>)<a class="headerlink" href="#extracting-information-from-semantic-structures-kv_items-grids" title="Permanent link">&para;</a></h2>
<p>Semantic-structure-based retrieval uses <strong>key-to-value mapping (<code>kv_items</code>)</strong> and <strong>matrix structures (<code>grids</code>)</strong>. This approach is robust to minor format variations in documents. Since structuring is estimated automatically, it may fail in some cases. If extraction does not work well, try using cell IDs or relative-position-based methods.</p>
<hr />
<h3 id="a-search-the-entire-document-no-table-specified">A. Search the Entire Document (No Table Specified)<a class="headerlink" href="#a-search-the-entire-document-no-table-specified" title="Permanent link">&para;</a></h3>
<h4 id="resultssearch_kv_items_by_key"><code>results.search_kv_items_by_key</code><a class="headerlink" href="#resultssearch_kv_items_by_key" title="Permanent link">&para;</a></h4>
<p>Search <code>kv_items</code> across the entire analysis result (possibly including multiple tables) by partial matching on the key.</p>
<p><strong>Arguments</strong></p>
<ul>
<li><code>key: str</code>: Search key (partial match)</li>
</ul>
<p><strong>Returns</strong></p>
<ul>
<li><code>List[dict]</code>: Each element is <code>{"key": [CellSchema, ...], "value": [CellSchema, ...]}</code></li>
</ul>
<p><strong>Example</strong></p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="n">kv_items</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">search_kv_items_by_key</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="s2">&quot;団体名&quot;</span><span class="p">)</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="k">for</span> <span class="n">kv</span> <span class="ow">in</span> <span class="n">kv_items</span><span class="p">:</span>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>    <span class="n">keys</span> <span class="o">=</span> <span class="s2">&quot;_&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">k</span><span class="o">.</span><span class="n">contents</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">kv</span><span class="p">[</span><span class="s2">&quot;key&quot;</span><span class="p">]])</span>
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>    <span class="n">val</span> <span class="o">=</span> <span class="n">kv</span><span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">contents</span>
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">keys</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
</span></code></pre></div>
<p><strong>Output</strong></p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>団 体 名 エムリズムカブシキガイシャ
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>団 体 名 MLism 株式会社
</span></code></pre></div>
<blockquote>
<p>Note
If cells have nested structures, the key may consist of multiple cells, so <code>key</code> is returned as a list.
Multiple values may also exist depending on the search, so results are returned as a list.</p>
</blockquote>
<hr />
<h3 id="b-search-within-a-specific-table-table-object_1">B. Search Within a Specific Table (<code>table</code> object)<a class="headerlink" href="#b-search-within-a-specific-table-table-object_1" title="Permanent link">&para;</a></h3>
<h4 id="tablesearch_kv_items_by_key"><code>table.search_kv_items_by_key</code><a class="headerlink" href="#tablesearch_kv_items_by_key" title="Permanent link">&para;</a></h4>
<p>Search for kv_items within table <code>t0</code> only by partial matching on the key.</p>
<p><strong>Arguments</strong></p>
<ul>
<li><code>key: str</code></li>
</ul>
<p><strong>Returns</strong></p>
<ul>
<li><code>List[dict]</code>: <code>{"key": [CellSchema], "value": [CellSchema]}</code></li>
</ul>
<p><strong>Example</strong></p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="n">hits</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">search_kv_items_by_key</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="s2">&quot;利用目的&quot;</span><span class="p">)</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="nb">print</span><span class="p">(</span><span class="n">hits</span><span class="p">)</span>
</span></code></pre></div>
<p><strong>Output</strong></p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="p">[</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a>    <span class="p">{</span>
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a>        <span class="s1">&#39;key&#39;</span><span class="p">:</span> <span class="p">[</span>
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a>            <span class="n">CellSchema</span><span class="p">(</span>
</span><span id="__span-14-5"><a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a>                <span class="n">meta</span><span class="o">=</span><span class="p">{},</span>
</span><span id="__span-14-6"><a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a>                <span class="n">contents</span><span class="o">=</span><span class="s1">&#39;利 用 目 的&#39;</span><span class="p">,</span>
</span><span id="__span-14-7"><a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a>                <span class="n">role</span><span class="o">=</span><span class="s1">&#39;header&#39;</span><span class="p">,</span>
</span><span id="__span-14-8"><a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a>                <span class="nb">id</span><span class="o">=</span><span class="s1">&#39;c3&#39;</span><span class="p">,</span>
</span><span id="__span-14-9"><a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a>                <span class="n">box</span><span class="o">=</span><span class="p">[</span><span class="mi">149</span><span class="p">,</span> <span class="mi">645</span><span class="p">,</span> <span class="mi">364</span><span class="p">,</span> <span class="mi">741</span><span class="p">],</span>
</span><span id="__span-14-10"><a id="__codelineno-14-10" name="__codelineno-14-10" href="#__codelineno-14-10"></a>                <span class="n">row</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="__span-14-11"><a id="__codelineno-14-11" name="__codelineno-14-11" href="#__codelineno-14-11"></a>                <span class="n">col</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="__span-14-12"><a id="__codelineno-14-12" name="__codelineno-14-12" href="#__codelineno-14-12"></a>                <span class="n">row_span</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="__span-14-13"><a id="__codelineno-14-13" name="__codelineno-14-13" href="#__codelineno-14-13"></a>                <span class="n">col_span</span><span class="o">=</span><span class="kc">None</span>
</span><span id="__span-14-14"><a id="__codelineno-14-14" name="__codelineno-14-14" href="#__codelineno-14-14"></a>            <span class="p">)</span>
</span><span id="__span-14-15"><a id="__codelineno-14-15" name="__codelineno-14-15" href="#__codelineno-14-15"></a>        <span class="p">],</span> 
</span><span id="__span-14-16"><a id="__codelineno-14-16" name="__codelineno-14-16" href="#__codelineno-14-16"></a>        <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="n">CellSchema</span><span class="p">(</span>
</span><span id="__span-14-17"><a id="__codelineno-14-17" name="__codelineno-14-17" href="#__codelineno-14-17"></a>            <span class="n">meta</span><span class="o">=</span><span class="p">{},</span> 
</span><span id="__span-14-18"><a id="__codelineno-14-18" name="__codelineno-14-18" href="#__codelineno-14-18"></a>            <span class="n">contents</span><span class="o">=</span><span class="s1">&#39;セミナー&#39;</span><span class="p">,</span> 
</span><span id="__span-14-19"><a id="__codelineno-14-19" name="__codelineno-14-19" href="#__codelineno-14-19"></a>            <span class="n">role</span><span class="o">=</span><span class="s1">&#39;cell&#39;</span><span class="p">,</span> 
</span><span id="__span-14-20"><a id="__codelineno-14-20" name="__codelineno-14-20" href="#__codelineno-14-20"></a>            <span class="nb">id</span><span class="o">=</span><span class="s1">&#39;c4&#39;</span><span class="p">,</span> 
</span><span id="__span-14-21"><a id="__codelineno-14-21" name="__codelineno-14-21" href="#__codelineno-14-21"></a>            <span class="n">box</span><span class="o">=</span><span class="p">[</span><span class="mi">365</span><span class="p">,</span> <span class="mi">645</span><span class="p">,</span> <span class="mi">1498</span><span class="p">,</span> <span class="mi">741</span><span class="p">],</span> 
</span><span id="__span-14-22"><a id="__codelineno-14-22" name="__codelineno-14-22" href="#__codelineno-14-22"></a>            <span class="n">row</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
</span><span id="__span-14-23"><a id="__codelineno-14-23" name="__codelineno-14-23" href="#__codelineno-14-23"></a>            <span class="n">col</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
</span><span id="__span-14-24"><a id="__codelineno-14-24" name="__codelineno-14-24" href="#__codelineno-14-24"></a>            <span class="n">row_span</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
</span><span id="__span-14-25"><a id="__codelineno-14-25" name="__codelineno-14-25" href="#__codelineno-14-25"></a>            <span class="n">col_span</span><span class="o">=</span><span class="kc">None</span>
</span><span id="__span-14-26"><a id="__codelineno-14-26" name="__codelineno-14-26" href="#__codelineno-14-26"></a>        <span class="p">)</span>
</span><span id="__span-14-27"><a id="__codelineno-14-27" name="__codelineno-14-27" href="#__codelineno-14-27"></a>    <span class="p">}</span>
</span><span id="__span-14-28"><a id="__codelineno-14-28" name="__codelineno-14-28" href="#__codelineno-14-28"></a><span class="p">]</span>
</span></code></pre></div>
<hr />
<h4 id="tableviewkv_items_to_dict"><code>table.view.kv_items_to_dict</code><a class="headerlink" href="#tableviewkv_items_to_dict" title="Permanent link">&para;</a></h4>
<p>Expand cell references in <code>kv_items</code> and convert them into a dictionary (<code>key string → value string</code>).</p>
<p><strong>Returns</strong></p>
<ul>
<li><code>dict[str, str]</code></li>
</ul>
<p><strong>Example</strong></p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="n">kv</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">kv_items_to_dict</span><span class="p">()</span>
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="nb">print</span><span class="p">(</span><span class="n">kv</span><span class="p">)</span>
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a><span class="nb">print</span><span class="p">(</span><span class="n">kv</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;利用目的&quot;</span><span class="p">))</span>
</span></code></pre></div>
<p><strong>Output</strong></p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>{
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a>  &quot;施設名称&quot;: &quot;MLism株式会社&quot;,
</span><span id="__span-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a>  &quot;利用目的&quot;: &quot;セミナー&quot;,
</span><span id="__span-16-4"><a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a>  &quot;実施内容&quot;: &quot;YomiTokuの利用方法に関する説明会&quot;
</span><span id="__span-16-5"><a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a>}
</span><span id="__span-16-6"><a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a>セミナー
</span></code></pre></div>
<hr />
<h4 id="tableviewgrids_to_dict"><code>table.view.grids_to_dict()</code><a class="headerlink" href="#tableviewgrids_to_dict" title="Permanent link">&para;</a></h4>
<p>Convert structured <code>grid</code> information into a list of record dictionaries.</p>
<p><strong>Returns</strong></p>
<ul>
<li><code>list[dict]</code>: <code>[{ "id": grid_id, "rows": [ {...}, ...]}]</code></li>
</ul>
<p><strong>Example</strong></p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="n">grids</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">grids_to_dict</span><span class="p">()</span>
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">grids</span><span class="p">:</span>
</span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;grid:&quot;</span><span class="p">,</span> <span class="n">g</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])</span>
</span><span id="__span-17-4"><a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a>    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">g</span><span class="p">[</span><span class="s2">&quot;rows&quot;</span><span class="p">]:</span>
</span><span id="__span-17-5"><a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a>        <span class="nb">print</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
</span></code></pre></div>
<p><strong>Output</strong></p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a>grid: g0
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a>{&#39;日付&#39;: &#39;2025年01月30日(月曜日)&#39;, &#39;入室時刻&#39;: &#39;10時00分&#39;, &#39;退室時刻&#39;: &#39;17時00分&#39;}
</span><span id="__span-18-3"><a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a>{&#39;日付&#39;: &#39;2025年02月1日(火曜日)&#39;, &#39;入室時刻&#39;: &#39;10時00分&#39;, &#39;退室時刻&#39;: &#39;17時00分&#39;}
</span><span id="__span-18-4"><a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a>{&#39;日付&#39;: &#39;年月日(曜日)&#39;, &#39;入室時刻&#39;: &#39;時分&#39;, &#39;退室時刻&#39;: &#39;時分&#39;}
</span><span id="__span-18-5"><a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a>{&#39;日付&#39;: &#39;年月日(曜日)&#39;, &#39;入室時刻&#39;: &#39;時分&#39;, &#39;退室時刻&#39;: &#39;時分&#39;}
</span><span id="__span-18-6"><a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a>{&#39;日付&#39;: &#39;年月日(曜日)&#39;, &#39;入室時刻&#39;: &#39;時分&#39;, &#39;退室時刻&#39;: &#39;時分&#39;}
</span></code></pre></div>
<hr />
<h2 id="exporting-structured-data-json-csv">Exporting Structured Data (JSON / CSV)<a class="headerlink" href="#exporting-structured-data-json-csv" title="Permanent link">&para;</a></h2>
<p>You can export the semantic analysis results into JSON or CSV for integration with other systems. You can export data for the entire document or for a specific table.</p>
<h3 id="a-export-the-entire-document">A. Export the Entire Document<a class="headerlink" href="#a-export-the-entire-document" title="Permanent link">&para;</a></h3>
<h4 id="resultsto_json"><code>results.to_json</code><a class="headerlink" href="#resultsto_json" title="Permanent link">&para;</a></h4>
<p>Save the analysis result of the entire document as JSON.</p>
<p><strong>Arguments</strong></p>
<ul>
<li><code>out_path: str</code>: Path to the output JSON file</li>
</ul>
<p><strong>Example</strong></p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="n">analyzer</span> <span class="o">=</span> <span class="n">TableSemanticParser</span><span class="p">(</span>
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a>    <span class="n">device</span><span class="o">=</span><span class="s2">&quot;cuda&quot;</span><span class="p">,</span>
</span><span id="__span-19-3"><a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a>    <span class="n">visualize</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="__span-19-4"><a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a><span class="p">)</span>
</span><span id="__span-19-5"><a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a><span class="n">imgs</span> <span class="o">=</span> <span class="n">load_pdf</span><span class="p">(</span><span class="n">path_img</span><span class="p">)</span>
</span><span id="__span-19-6"><a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a><span class="n">results</span><span class="p">,</span> <span class="n">vis_layout</span><span class="p">,</span> <span class="n">vis_ocr</span> <span class="o">=</span> <span class="n">analyzer</span><span class="p">(</span><span class="n">imgs</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="__span-19-7"><a id="__codelineno-19-7" name="__codelineno-19-7" href="#__codelineno-19-7"></a>
</span><span id="__span-19-8"><a id="__codelineno-19-8" name="__codelineno-19-8" href="#__codelineno-19-8"></a><span class="c1"># Save the document analysis result as JSON</span>
</span><span id="__span-19-9"><a id="__codelineno-19-9" name="__codelineno-19-9" href="#__codelineno-19-9"></a><span class="n">results</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="s2">&quot;out/result.json&quot;</span><span class="p">)</span>
</span></code></pre></div>
<hr />
<h4 id="tablesemanticparserschemaload_json"><code>TableSemanticParserSchema.load_json</code><a class="headerlink" href="#tablesemanticparserschemaload_json" title="Permanent link">&para;</a></h4>
<p><code>load_json</code> is a utility that reads a saved JSON result and restores it as <code>TableSemanticParserSchema</code> (= <code>results</code>). This enables re-running extraction logic without reprocessing with AI. Page-count billing (or processing count) is performed only when AI is invoked. Therefore, running extraction on results loaded via <code>load_json</code> does not count toward processing.</p>
<p>During development/validation, or when you want to reduce processing time, it is recommended to save once with <code>to_json</code> and then reload with <code>load_json</code>.</p>
<p><strong>Arguments</strong></p>
<ul>
<li><code>json_path: str</code>: Path to the JSON file</li>
</ul>
<p><strong>Example</strong></p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">yomitoku.schemas.table_semantic_parser</span><span class="w"> </span><span class="kn">import</span> <span class="n">TableSemanticParserSchema</span>
</span><span id="__span-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a>
</span><span id="__span-20-3"><a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a><span class="n">json_path</span> <span class="o">=</span> <span class="s2">&quot;out/result.json&quot;</span>
</span><span id="__span-20-4"><a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a><span class="n">results</span> <span class="o">=</span> <span class="n">TableSemanticParserSchema</span><span class="o">.</span><span class="n">load_json</span><span class="p">(</span><span class="n">json_path</span><span class="p">)</span>
</span></code></pre></div>
<hr />
<h4 id="resultsto_dict"><code>results.to_dict</code><a class="headerlink" href="#resultsto_dict" title="Permanent link">&para;</a></h4>
<p><code>to_dict</code> is a utility method that aggregates, for every table in the document, the following by table ID:</p>
<ul>
<li><code>kv_items</code> (Key-Value structures)</li>
<li><code>grids</code> (matrix structures)</li>
</ul>
<p>It converts the result into a Python <code>dict</code> (structured data). It reduces information such as cell bounding boxes and converts into structured data composed primarily of text.</p>
<p>This is suitable when you want to use the parsed results directly in application logic or API responses, or when you want to feed structured document information into a generative AI model.</p>
<p><strong>Example</strong></p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">pprint</span><span class="w"> </span><span class="kn">import</span> <span class="n">pprint</span>
</span><span id="__span-21-2"><a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a><span class="n">parsed</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
</span><span id="__span-21-3"><a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a><span class="n">pprint</span><span class="p">(</span><span class="n">parsed</span><span class="p">)</span>
</span></code></pre></div>
<p><strong>Output</strong></p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="p">{</span>
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a>    <span class="s1">&#39;t0&#39;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-22-3"><a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a>        <span class="s1">&#39;grids&#39;</span><span class="p">:</span> <span class="p">[</span>
</span><span id="__span-22-4"><a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a>            <span class="p">{</span>
</span><span id="__span-22-5"><a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a>                <span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="s1">&#39;g0&#39;</span><span class="p">,</span>
</span><span id="__span-22-6"><a id="__codelineno-22-6" name="__codelineno-22-6" href="#__codelineno-22-6"></a>                <span class="s1">&#39;rows&#39;</span><span class="p">:</span> <span class="p">[</span>
</span><span id="__span-22-7"><a id="__codelineno-22-7" name="__codelineno-22-7" href="#__codelineno-22-7"></a>                    <span class="p">{</span><span class="s1">&#39;入室時刻&#39;</span><span class="p">:</span> <span class="s1">&#39;10時00分&#39;</span><span class="p">,</span><span class="s1">&#39;日付&#39;</span><span class="p">:</span> <span class="s1">&#39;2025年01月30日(月曜日)&#39;</span><span class="p">,</span><span class="s1">&#39;退室時刻&#39;</span><span class="p">:</span> <span class="s1">&#39;17時00分&#39;</span><span class="p">},</span>
</span><span id="__span-22-8"><a id="__codelineno-22-8" name="__codelineno-22-8" href="#__codelineno-22-8"></a>                    <span class="p">{</span><span class="s1">&#39;入室時刻&#39;</span><span class="p">:</span> <span class="s1">&#39;10時00分&#39;</span><span class="p">,</span><span class="s1">&#39;日付&#39;</span><span class="p">:</span> <span class="s1">&#39;2025年02月1日(火曜日)&#39;</span><span class="p">,</span><span class="s1">&#39;退室時刻&#39;</span><span class="p">:</span> <span class="s1">&#39;17時00分&#39;</span><span class="p">},</span>
</span><span id="__span-22-9"><a id="__codelineno-22-9" name="__codelineno-22-9" href="#__codelineno-22-9"></a>                    <span class="p">{</span><span class="s1">&#39;入室時刻&#39;</span><span class="p">:</span> <span class="s1">&#39;時分&#39;</span><span class="p">,</span> <span class="s1">&#39;日付&#39;</span><span class="p">:</span> <span class="s1">&#39;年月日(曜日)&#39;</span><span class="p">,</span> <span class="s1">&#39;退室時刻&#39;</span><span class="p">:</span> <span class="s1">&#39;時分&#39;</span><span class="p">},</span>
</span><span id="__span-22-10"><a id="__codelineno-22-10" name="__codelineno-22-10" href="#__codelineno-22-10"></a>                    <span class="p">{</span><span class="s1">&#39;入室時刻&#39;</span><span class="p">:</span> <span class="s1">&#39;時分&#39;</span><span class="p">,</span> <span class="s1">&#39;日付&#39;</span><span class="p">:</span> <span class="s1">&#39;年月日(曜日)&#39;</span><span class="p">,</span> <span class="s1">&#39;退室時刻&#39;</span><span class="p">:</span> <span class="s1">&#39;時分&#39;</span><span class="p">},</span>
</span><span id="__span-22-11"><a id="__codelineno-22-11" name="__codelineno-22-11" href="#__codelineno-22-11"></a>                    <span class="p">{</span><span class="s1">&#39;入室時刻&#39;</span><span class="p">:</span> <span class="s1">&#39;時分&#39;</span><span class="p">,</span> <span class="s1">&#39;日付&#39;</span><span class="p">:</span> <span class="s1">&#39;年月日(曜日)&#39;</span><span class="p">,</span> <span class="s1">&#39;退室時刻&#39;</span><span class="p">:</span> <span class="s1">&#39;時分&#39;</span><span class="p">}]</span>
</span><span id="__span-22-12"><a id="__codelineno-22-12" name="__codelineno-22-12" href="#__codelineno-22-12"></a>            <span class="p">}</span>
</span><span id="__span-22-13"><a id="__codelineno-22-13" name="__codelineno-22-13" href="#__codelineno-22-13"></a>        <span class="p">],</span>
</span><span id="__span-22-14"><a id="__codelineno-22-14" name="__codelineno-22-14" href="#__codelineno-22-14"></a>        <span class="s1">&#39;kv_items&#39;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-22-15"><a id="__codelineno-22-15" name="__codelineno-22-15" href="#__codelineno-22-15"></a>            <span class="s1">&#39;利用目的&#39;</span><span class="p">:</span> <span class="s1">&#39;セミナー&#39;</span><span class="p">,</span>
</span><span id="__span-22-16"><a id="__codelineno-22-16" name="__codelineno-22-16" href="#__codelineno-22-16"></a>            <span class="s1">&#39;実施内容&#39;</span><span class="p">:</span> <span class="s1">&#39;YomiTokuの利用方法に関する説明会&#39;</span><span class="p">,</span>
</span><span id="__span-22-17"><a id="__codelineno-22-17" name="__codelineno-22-17" href="#__codelineno-22-17"></a>            <span class="s1">&#39;施設名称&#39;</span><span class="p">:</span> <span class="s1">&#39;MLism株式会社&#39;</span>
</span><span id="__span-22-18"><a id="__codelineno-22-18" name="__codelineno-22-18" href="#__codelineno-22-18"></a>        <span class="p">}</span>
</span><span id="__span-22-19"><a id="__codelineno-22-19" name="__codelineno-22-19" href="#__codelineno-22-19"></a>    <span class="p">},</span>
</span><span id="__span-22-20"><a id="__codelineno-22-20" name="__codelineno-22-20" href="#__codelineno-22-20"></a>    <span class="s1">&#39;t1&#39;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-22-21"><a id="__codelineno-22-21" name="__codelineno-22-21" href="#__codelineno-22-21"></a>        <span class="s1">&#39;grids&#39;</span><span class="p">:</span> <span class="p">[],</span>
</span><span id="__span-22-22"><a id="__codelineno-22-22" name="__codelineno-22-22" href="#__codelineno-22-22"></a>        <span class="s1">&#39;kv_items&#39;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-22-23"><a id="__codelineno-22-23" name="__codelineno-22-23" href="#__codelineno-22-23"></a>            <span class="s1">&#39;代表者_0&#39;</span><span class="p">:</span> <span class="s1">&#39;キノシタコウタロウ&#39;</span><span class="p">,</span>
</span><span id="__span-22-24"><a id="__codelineno-22-24" name="__codelineno-22-24" href="#__codelineno-22-24"></a>            <span class="s1">&#39;代表者_1&#39;</span><span class="p">:</span> <span class="s1">&#39;木之下滉大郎&#39;</span><span class="p">,</span>
</span><span id="__span-22-25"><a id="__codelineno-22-25" name="__codelineno-22-25" href="#__codelineno-22-25"></a>            <span class="s1">&#39;住所&#39;</span><span class="p">:</span> <span class="s1">&#39;〒277-8520千葉県柏市若柴178番地4柏の葉キャンパス148街区2ショップ&amp;オフィス棟6F&#39;</span><span class="p">,</span>
</span><span id="__span-22-26"><a id="__codelineno-22-26" name="__codelineno-22-26" href="#__codelineno-22-26"></a>            <span class="s1">&#39;団体名_0&#39;</span><span class="p">:</span> <span class="s1">&#39;エムリズムカブシキガイシャ&#39;</span><span class="p">,</span>
</span><span id="__span-22-27"><a id="__codelineno-22-27" name="__codelineno-22-27" href="#__codelineno-22-27"></a>            <span class="s1">&#39;団体名_1&#39;</span><span class="p">:</span> <span class="s1">&#39;MLism株式会社&#39;</span><span class="p">,</span>
</span><span id="__span-22-28"><a id="__codelineno-22-28" name="__codelineno-22-28" href="#__codelineno-22-28"></a>            <span class="s1">&#39;電話番号&#39;</span><span class="p">:</span> <span class="s1">&#39;090-1234-5678&#39;</span>
</span><span id="__span-22-29"><a id="__codelineno-22-29" name="__codelineno-22-29" href="#__codelineno-22-29"></a>        <span class="p">}</span>
</span><span id="__span-22-30"><a id="__codelineno-22-30" name="__codelineno-22-30" href="#__codelineno-22-30"></a>    <span class="p">}</span>
</span><span id="__span-22-31"><a id="__codelineno-22-31" name="__codelineno-22-31" href="#__codelineno-22-31"></a><span class="p">}</span>
</span></code></pre></div>
<hr />
<h3 id="b-export-per-table">B. Export Per Table<a class="headerlink" href="#b-export-per-table" title="Permanent link">&para;</a></h3>
<h4 id="tablekv_items_to_json"><code>table.kv_items_to_json</code><a class="headerlink" href="#tablekv_items_to_json" title="Permanent link">&para;</a></h4>
<p>Export <code>kv_items</code> in the table into a single JSON file.</p>
<p><strong>Arguments</strong></p>
<ul>
<li><code>out_path: str</code></li>
</ul>
<p><strong>Returns</strong></p>
<ul>
<li><code>dict</code> (In addition to writing a file, it also returns the dictionary in memory.)</li>
</ul>
<p><strong>Example</strong></p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="n">table</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">find_table_by_id</span><span class="p">(</span><span class="s2">&quot;t0&quot;</span><span class="p">)</span>
</span><span id="__span-23-2"><a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a><span class="n">kv</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">export</span><span class="o">.</span><span class="n">kv_items_to_json</span><span class="p">(</span><span class="s2">&quot;out/kv_items.json&quot;</span><span class="p">)</span>
</span><span id="__span-23-3"><a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a><span class="nb">print</span><span class="p">(</span><span class="n">kv</span><span class="p">)</span>
</span></code></pre></div>
<p><strong>Output</strong></p>
<div class="language-json highlight"><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="p">{</span>
</span><span id="__span-24-2"><a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a><span class="w">    </span><span class="nt">&quot;施設名称&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;MLism株式会社&quot;</span><span class="p">,</span>
</span><span id="__span-24-3"><a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a><span class="w">    </span><span class="nt">&quot;利用目的&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;セミナー&quot;</span><span class="p">,</span>
</span><span id="__span-24-4"><a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a><span class="w">    </span><span class="nt">&quot;実施内容&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;YomiTokuの利用方法に関する説明会&quot;</span>
</span><span id="__span-24-5"><a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a><span class="p">}</span>
</span></code></pre></div>
<hr />
<h4 id="tablegrids_to_json"><code>table.grids_to_json</code><a class="headerlink" href="#tablegrids_to_json" title="Permanent link">&para;</a></h4>
<p>Export <code>grids</code> in the table into a single JSON file. Since a table may contain multiple grids, the output is a list.</p>
<p><strong>Arguments</strong></p>
<ul>
<li><code>out_path: str</code></li>
</ul>
<p><strong>Returns</strong></p>
<ul>
<li><code>list[dict]</code>: Dictionary data converted from grids into record rows</li>
</ul>
<p><strong>Example</strong></p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="n">table</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">find_table_by_id</span><span class="p">(</span><span class="s2">&quot;t0&quot;</span><span class="p">)</span>
</span><span id="__span-25-2"><a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a><span class="n">grids</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">export</span><span class="o">.</span><span class="n">grids_to_json</span><span class="p">(</span><span class="s2">&quot;out/grids.json&quot;</span><span class="p">)</span>
</span><span id="__span-25-3"><a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a><span class="nb">print</span><span class="p">(</span><span class="n">grids</span><span class="p">)</span>
</span></code></pre></div>
<p><strong>Output</strong></p>
<div class="language-json highlight"><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="p">[</span>
</span><span id="__span-26-2"><a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-26-3"><a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a><span class="w">        </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;g0&quot;</span><span class="p">,</span>
</span><span id="__span-26-4"><a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a><span class="w">        </span><span class="nt">&quot;rows&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-26-5"><a id="__codelineno-26-5" name="__codelineno-26-5" href="#__codelineno-26-5"></a><span class="w">            </span><span class="p">{</span>
</span><span id="__span-26-6"><a id="__codelineno-26-6" name="__codelineno-26-6" href="#__codelineno-26-6"></a><span class="w">                </span><span class="nt">&quot;日付&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2025年01月30日(月曜日)&quot;</span><span class="p">,</span>
</span><span id="__span-26-7"><a id="__codelineno-26-7" name="__codelineno-26-7" href="#__codelineno-26-7"></a><span class="w">                </span><span class="nt">&quot;入室時刻&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;10時00分&quot;</span><span class="p">,</span>
</span><span id="__span-26-8"><a id="__codelineno-26-8" name="__codelineno-26-8" href="#__codelineno-26-8"></a><span class="w">                </span><span class="nt">&quot;退室時刻&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;17時00分&quot;</span>
</span><span id="__span-26-9"><a id="__codelineno-26-9" name="__codelineno-26-9" href="#__codelineno-26-9"></a><span class="w">            </span><span class="p">},</span>
</span><span id="__span-26-10"><a id="__codelineno-26-10" name="__codelineno-26-10" href="#__codelineno-26-10"></a><span class="w">            </span><span class="p">{</span>
</span><span id="__span-26-11"><a id="__codelineno-26-11" name="__codelineno-26-11" href="#__codelineno-26-11"></a><span class="w">                </span><span class="nt">&quot;日付&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2025年02月1日(火曜日)&quot;</span><span class="p">,</span>
</span><span id="__span-26-12"><a id="__codelineno-26-12" name="__codelineno-26-12" href="#__codelineno-26-12"></a><span class="w">                </span><span class="nt">&quot;入室時刻&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;10時00分&quot;</span><span class="p">,</span>
</span><span id="__span-26-13"><a id="__codelineno-26-13" name="__codelineno-26-13" href="#__codelineno-26-13"></a><span class="w">                </span><span class="nt">&quot;退室時刻&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;17時00分&quot;</span>
</span><span id="__span-26-14"><a id="__codelineno-26-14" name="__codelineno-26-14" href="#__codelineno-26-14"></a><span class="w">            </span><span class="p">},</span>
</span><span id="__span-26-15"><a id="__codelineno-26-15" name="__codelineno-26-15" href="#__codelineno-26-15"></a><span class="w">            </span><span class="p">{</span>
</span><span id="__span-26-16"><a id="__codelineno-26-16" name="__codelineno-26-16" href="#__codelineno-26-16"></a><span class="w">                </span><span class="nt">&quot;日付&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;年月日(曜日)&quot;</span><span class="p">,</span>
</span><span id="__span-26-17"><a id="__codelineno-26-17" name="__codelineno-26-17" href="#__codelineno-26-17"></a><span class="w">                </span><span class="nt">&quot;入室時刻&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;時分&quot;</span><span class="p">,</span>
</span><span id="__span-26-18"><a id="__codelineno-26-18" name="__codelineno-26-18" href="#__codelineno-26-18"></a><span class="w">                </span><span class="nt">&quot;退室時刻&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;時分&quot;</span>
</span><span id="__span-26-19"><a id="__codelineno-26-19" name="__codelineno-26-19" href="#__codelineno-26-19"></a><span class="w">            </span><span class="p">},</span>
</span><span id="__span-26-20"><a id="__codelineno-26-20" name="__codelineno-26-20" href="#__codelineno-26-20"></a><span class="w">            </span><span class="p">{</span>
</span><span id="__span-26-21"><a id="__codelineno-26-21" name="__codelineno-26-21" href="#__codelineno-26-21"></a><span class="w">                </span><span class="nt">&quot;日付&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;年月日(曜日)&quot;</span><span class="p">,</span>
</span><span id="__span-26-22"><a id="__codelineno-26-22" name="__codelineno-26-22" href="#__codelineno-26-22"></a><span class="w">                </span><span class="nt">&quot;入室時刻&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;時分&quot;</span><span class="p">,</span>
</span><span id="__span-26-23"><a id="__codelineno-26-23" name="__codelineno-26-23" href="#__codelineno-26-23"></a><span class="w">                </span><span class="nt">&quot;退室時刻&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;時分&quot;</span>
</span><span id="__span-26-24"><a id="__codelineno-26-24" name="__codelineno-26-24" href="#__codelineno-26-24"></a><span class="w">            </span><span class="p">},</span>
</span><span id="__span-26-25"><a id="__codelineno-26-25" name="__codelineno-26-25" href="#__codelineno-26-25"></a><span class="w">            </span><span class="p">{</span>
</span><span id="__span-26-26"><a id="__codelineno-26-26" name="__codelineno-26-26" href="#__codelineno-26-26"></a><span class="w">                </span><span class="nt">&quot;日付&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;年月日(曜日)&quot;</span><span class="p">,</span>
</span><span id="__span-26-27"><a id="__codelineno-26-27" name="__codelineno-26-27" href="#__codelineno-26-27"></a><span class="w">                </span><span class="nt">&quot;入室時刻&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;時分&quot;</span><span class="p">,</span>
</span><span id="__span-26-28"><a id="__codelineno-26-28" name="__codelineno-26-28" href="#__codelineno-26-28"></a><span class="w">                </span><span class="nt">&quot;退室時刻&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;時分&quot;</span>
</span><span id="__span-26-29"><a id="__codelineno-26-29" name="__codelineno-26-29" href="#__codelineno-26-29"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-26-30"><a id="__codelineno-26-30" name="__codelineno-26-30" href="#__codelineno-26-30"></a><span class="w">        </span><span class="p">]</span>
</span><span id="__span-26-31"><a id="__codelineno-26-31" name="__codelineno-26-31" href="#__codelineno-26-31"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-26-32"><a id="__codelineno-26-32" name="__codelineno-26-32" href="#__codelineno-26-32"></a><span class="p">]</span>
</span></code></pre></div>
<hr />
<h4 id="tablegrids_to_csv"><code>table.grids_to_csv</code><a class="headerlink" href="#tablegrids_to_csv" title="Permanent link">&para;</a></h4>
<p>Export <code>grids</code> in the table as CSV. You can optionally specify column names to export only certain fields.</p>
<p><strong>Arguments</strong></p>
<ul>
<li><code>out_path: str</code>: Path to the output CSV file</li>
<li><code>columns: List[str] | None = None</code>: Column names to export (matched by partial match)</li>
<li><code>ignore_space: bool = True</code>: Whether to remove spaces when exporting</li>
</ul>
<p><strong>Returns</strong></p>
<ul>
<li><code>List[List[str]]</code> (2D array representing CSV rows)</li>
</ul>
<p>In the example below, columns are specified. If columns are not specified, all information in the grid is exported.</p>
<p><strong>Example</strong></p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="n">table</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">find_table_by_id</span><span class="p">(</span><span class="s2">&quot;t0&quot;</span><span class="p">)</span>
</span><span id="__span-27-2"><a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a><span class="n">csvs</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">export</span><span class="o">.</span><span class="n">grids_to_csv</span><span class="p">(</span><span class="s2">&quot;out/grid.csv&quot;</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;入室&quot;</span><span class="p">,</span> <span class="s2">&quot;退室&quot;</span><span class="p">])</span>
</span></code></pre></div>
<p><strong>Output</strong>
Exporting only “入室” and “退室” as columns:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a>入室時刻,退室時刻
</span><span id="__span-28-2"><a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a>10時00分,17時00分
</span><span id="__span-28-3"><a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a>10時00分,17時00分
</span><span id="__span-28-4"><a id="__codelineno-28-4" name="__codelineno-28-4" href="#__codelineno-28-4"></a>時分,時分
</span><span id="__span-28-5"><a id="__codelineno-28-5" name="__codelineno-28-5" href="#__codelineno-28-5"></a>時分,時分
</span><span id="__span-28-6"><a id="__codelineno-28-6" name="__codelineno-28-6" href="#__codelineno-28-6"></a>時分,時分
</span></code></pre></div>
<p><strong>Generated file names</strong></p>
<ul>
<li>A suffix with the <code>grid_id</code> is added, e.g. <code>out/grid_0.csv</code>.
  If multiple grids exist in the table, the suffix changes accordingly, e.g. <code>out/grid_1.csv</code>.</li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.tabs"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>